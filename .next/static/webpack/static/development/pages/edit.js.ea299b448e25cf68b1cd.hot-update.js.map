{"version":3,"file":"static/webpack/static/development/pages/edit.js.ea299b448e25cf68b1cd.hot-update.js","sources":["webpack:///./pages/edit.js"],"sourcesContent":["import Layout from '../components/Layout.js'\nimport React, { Component } from 'react'\nimport axios from 'axios'\n\nexport default class extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            title: this.props.photo.name,\n            description: this.props.photo.description,\n            img: this.props.photo.image,\n            errorLabel: \"\",\n            errorLabelHidden: true,\n            list: []\n        };\n    }\n\n    static async getInitialProps ({ query: { user ,photo} }) {\n        return {user:user ,photo:photo}\n    }\n\n    onChange = (e) => {\n        // Because we named the inputs to match their corresponding values in state, it's\n        // super easy to update the state\n        this.setState({[e.target.name]: e.target.value});\n    }\n\n    onSubmit = (e) => {\n        e.preventDefault();\n        // get our form data out of state\n        const {title,img,description, list, errorLabel} = this.state;\n\n        axios.post('/'+this.props.photo._id+'?_method=PUT', {title: title,img: img,description: description})\n            .then((response) => {\n                var payload = \"Upload Success\";\n                //console.log(`response fetched. ${payload}`);\n                this.setState({\n                    title: \"\",\n                    description: \"\",\n                    img: \"\",\n                    errorLabelHidden: true,\n                    list: this.state.list.concat([payload])\n                });\n                //redirect back to homepage\n                window.location = response.data;\n            })\n            .catch((error) => {\n                var payload = JSON.stringify(error, null, 2);\n                console.log(error);\n                this.setState({\n                    errorLabelHidden: false,\n                    errorLabel: \"OOPS that didn't work :(\",\n                    list: this.state.list.concat([payload])\n                });\n            });\n    }\n\n    render () {\n        const {title,description,img, list, errorLabel} = this.state;\n\n        return (\n            <Layout title = 'PhotoLink' user = {this.props.user}>\n                \n                <form className=\"container\" onSubmit={this.onSubmit}>\n                    \n                    <h4>Edit photo</h4>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"title\">Title</label>\n                        <input type=\"text\" className=\"form-control\" id=\"exampleTitle\" placeholder=\"Title\" required name=\"title\" value={title} onChange={this.onChange}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"description\">Description</label>\n                        <input type=\"text\" className=\"form-control\" id=\"exampleDiscription\" placeholder=\"(Optional)\" name=\"description\" value={description} onChange={this.onChange}/>\n                    </div>\n\n                    <label htmlFor=\"img\">Your Photo URL</label>\n                        <div className=\"input-group mb-3\">\n                        <div className=\"input-group-prepend\">\n                            <span className=\"input-group-text\" id=\"basic-addon3\">https://example.com/img.jpg</span>\n                        </div>\n                        <input type=\"url\" className=\"form-control\" id=\"basic-url\" aria-describedby=\"basic-addon3\" name=\"img\" value={img} onChange={this.onChange}/>\n                    </div>\n\n                    <div><span hidden>{errorLabel}</span></div>\n\n                    <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                </form>\n\n                <style jsx>{`\n                    form{\n                        margin:auto;\n                        padding:0 2em;\n                    }\n                    .btn-primary{\n                        margin-top:1.5em;\n                    }\n                    h4{\n                        margin-top:1em;\n                        margin-bottom:1em;\n                    }\n                `}</style>\n            </Layout>\n        )\n\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiBA;AACA;AACA;AACA;AACA;AArBA;AAuBA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AACA;AAMA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAjDA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAUA;AACA;;;AAyCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAzBA;AAAA;AAAA;AA4CA;;;;;;;;;;;;;AAxFA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAhBA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}